table1(~ factor(section1_expl$exposure1) + factor(section1_expl$exposure1) | section1_expl$outcome1, data=section1_expl)
knitr::opts_chunk$set(echo = TRUE)
library(boot)
library(table1)
library(here)
library(ggplot2)
install.packages("survival")
library(survival)
#Loading Data
library(readr)
section1 <- read_csv("data/section1.csv")
knitr::opts_chunk$set(echo = TRUE)
library(boot)
library(table1)
library(here)
library(ggplot2)
install.packages("survival")
library(survival)
#Loading Data
library(readr)
section1 <- read_csv("data/section1.csv")
here::i_am("assignment/Section1_Assignment_2023.Rmd")
knitr::opts_chunk$set(echo = TRUE)
library(boot)
library(table1)
library(here)
library(ggplot2)
install.packages("survival")
library(survival)
#Loading Data
library(readr)
section1 <- read_csv("data/section1.csv")
install.packages("survival")
here::i_am("assignment/Section1_Assignment_2023.Rmd")
knitr::opts_chunk$set(echo = TRUE)
library(boot)
library(table1)
library(here)
library(ggplot2)
install.packages("survival")
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Figure 1",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Figure 1",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Figure 1",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
install.packages("patchwork")
library(patchwork)
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Figure 1",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Figure 1",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Figure 1",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave("assignment/question_3_grids.pdf", plot = q3grid, scale=1, width=10, height=20, dpi=50)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=10, height=20, dpi=50)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=10, height=10, dpi=50)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=10, height=10, dpi=50)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=30, height=10, dpi=50)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=30, height=30, dpi=50)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=30, height=20, dpi=100)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=4, width=30, height=5, dpi=100)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=4, width=30, height=5, dpi=70)
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=30, height=5, dpi=70)
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=30, height=5, dpi=70)
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(here::here("assignment/question_3_grids.pdf"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
section1_expl <-section1
#creating tbale 1 of Exposure x Outcome
section1_expl$outcome1 <-
factor(section1$outcome,
levels=c(0,1,2),
labels=c("no outcome", # Reference
"outcome 1",
"outcome 2"))
section1_expl$exposure1 <-
factor(section1$exposure,
levels=c(0,1),
labels=c("no exposure",
"exposure 1"))
table1(~ factor(section1_expl$exposure1) + factor(section1_expl$exposure1) | section1_expl$outcome1, data=section1_expl)
section1_expl <-section1
#creating tbale 1 of Exposure x Outcome
section1_expl$outcome1 <-
factor(section1$outcome,
levels=c(0,1,2),
labels=c("no outcome", # Reference
"outcome 1",
"outcome 2"))
section1_expl$exposure1 <-
factor(section1$exposure,
levels=c(0,1),
labels=c("no exposure",
"exposure 1"))
table1(~ factor(section1_expl$exposure1) + factor(section1_expl$exposure1) | section1_expl$outcome1, data=section1_expl)
table1(~ factor(section1_expl$exposure1) + factor(section1_expl$exposure1) + factor(section1_expl$confounder) | section1_expl$outcome1, data=section1_expl)
section1_expl <-section1
#creating tbale 1 of Exposure x Outcome
section1_expl$outcome1 <-
factor(section1$outcome,
levels=c(0,1,2),
labels=c("no outcome", # Reference
"outcome 1",
"outcome 2"))
section1_expl$exposure1 <-
factor(section1$exposure,
levels=c(0,1),
labels=c("no exposure",
"exposure"))
section1_expl$confounder1 <-
factor(section1$confounder,
levels=c(0,1),
labels=c("no confounder",
"confounder"))
table1(~ factor(section1_expl$exposure1) + factor(section1_expl$exposure1) + factor(section1_expl$confounder1) | section1_expl$outcome1, data=section1_expl)
table1(~ factor(section1_expl$exposure1) + factor(section1_expl$confounder1) | section1_expl$outcome1, data=section1_expl)
table1(~ section1_expl$exposure1 | section1_expl$confounder1*section1_expl$outcome1, data=section1_expl)
table1(~ section1_expl$exposure1 | section1_expl$outcome1*section1_expl$confounder1, data=section1_expl)
here::i_am("assignment/Section1_Assignment_2023.Rmd")
knitr::opts_chunk$set(echo = TRUE)
library(boot)
library(table1)
library(here)
library(ggplot2)
install.packages("survival")
library(survival)
#Loading Data
library(readr)
section1 <- read_csv("data/section1.csv")
knitr::opts_chunk$set(echo = TRUE)
here::i_am("assignment/Section1_Assignment_2023.Rmd")
library(boot)
library(table1)
library(here)
library(ggplot2)
install.packages("survival")
library(survival)
#Loading Data
library(readr)
section1 <- read_csv(here::here("data/section1.csv"))
install.packages("patchwork")
library(patchwork)
install.packages("survival")
install.packages("patchwork")
ggsave(here::here("figures/question_3_grids.pdf"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(file =here::here("figures/question_3_grids.pdf"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(here::here("output/question_3_grids.pdf"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
knitr::include_graphics(here::here("output/questionquestion_3_grids.pdf"))
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(here::here("output/question_3_grids.pdf"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
knitr::include_graphics(here::here("output/question_3_grids.pdf"))
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(here::here("output/question_3_grids.png"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
knitr::include_graphics(here::here("output/question_3_grids.png"))
s1q2<-read.csv(here::here("data/s1q2.csv"))
ggplot(s1q2) + geom_linerange(aes(y = ID, xmin = start_time, xmax = stop_time))
s1q9<-survfit(surv(time=section1$start, time2=section1$stop, event=outcome) ~1 data=section1)
s1q9<-survfit(surv(time=section1$start, time2=section1$stop, event=outcome) ~1, data=section1)
library(survival)
s1q9<-survfit(surv(time=section1$start, time2=section1$stop, event=outcome) ~1, data=section1)
s1q9<-survfit(Surv(time=section1$start, time2=section1$stop, event=outcome) ~1, data=section1)
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",) + theme_classic()
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",
colour="outcome") + theme_classic()
s1q3p1<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Classic theme",
x = "year",
y = "ID",
colour="outcome") + theme_classic()
s1q3p2<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Grey Theme",
x = "year",
y = "ID",) + theme_gray()
s1q3p3<- ggplot(s1q3) + geom_linerange(aes(y = ID, xmin = start, xmax = stop, group = outcome)) +
geom_point(aes(x=stop, y=ID, shape=(as.factor(outcome)), color=(as.factor(outcome)))) +
labs(
title = "Line plot for Random Sample n=25",
tag = "Light Theme",
x = "year",
y = "ID",) + theme_light()
q3grid<-s1q3p1 + s1q3p2 + s1q3p3
ggsave(here::here("output/question_3_grids.png"), plot = q3grid, scale=1, width=20, height=5, dpi=70)
knitr::include_graphics(here::here("output/question_3_grids.png"))
library(dplyr)
cohort <- section1 %>%
mutate(cs_outcome = as.numeric(outcome == 2))
cohort %>%
count(cs_outcome)
section1 %>%
count(outcome)
cohort <- section1 %>%
mutate(cs_outcome = as.numeric(outcome > 0))
cohort %>%
count(cs_outcome)
section1 %>%
count(outcome)
cohort <- section1 %>%
mutate(cs_outcome = as.numeric(outcome > 0))
cohort %>%
count(cs_outcome)
cohort_s1q9 <- section1 %>%
mutate(cs_outcome = as.numeric(outcome > 0))
cohort_s1q9 %>%
count(cs_outcome)
survfit_s1q9<-survfit(Surv(time=section1$start, time2=section1$stop, event=outcome) ~1, data=cohort_s1q9)
View(survfit_s1q9)
survmodel_s1q9<-survfit(Surv(time=cohort_s1q9$start, time2=cohort_s1q9$stop, event=outcome) ~1, data=cohort_s1q9)
section1 %>%
count(outcome)
cohort_s1q9 <- section1 %>%
mutate(cs_outcome = as.numeric(outcome > 0))
cohort_s1q9 %>%
count(cs_outcome)
View(cohort_s1q9)
survmodel_s1q9<-survfit(Surv(time=start, time2=stop, event=cs_outcome) ~1, data=cohort_s1q9)
View(survmodel_s1q9)
survmodel_s1q9<-survfit(Surv(time=start, time2=stop, event=cs_outcome) ~1, data=cohort_s1q9)
plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
plot_dat
View(plot_dat)
survmodel_s1q9<-survfit(Surv(time=start, time2=stop, event=cs_outcome) ~1, data=cohort_s1q9)
plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
plot_dat
km_plot <- ggplot() + geom_step(data = plot_dat, aes(x = Year
y = Risk), direction = "hv") + scale_x_continuous(expand = c
survmodel_s1q9<-survfit(Surv(time=start, time2=stop, event=cs_outcome) ~1, data=cohort_s1q9)
plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
plot_dat
km_plot <- ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = c
0)) + scale_y_continuous(expand = c(0, 0), limits = c(0,
survmodel_s1q9<-survfit(Surv(time=start, time2=stop, event=cs_outcome) ~1, data=cohort_s1q9)
plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
plot_dat
km_plot <- ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = 0) + scale_y_continuous(expand = c(0, 0), limits = c(0,
1))
survmodel_s1q9<-survfit(Surv(time=start, time2=stop, event=cs_outcome) ~1, data=cohort_s1q9)
plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
plot_dat
km_plot <- ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = c(0)) + scale_y_continuous(expand = c(0, 0), limits = c(0,
1))
km_plot <- ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = c(0)) + scale_y_continuous(expand = c(0, 0), limits = c(0,
1))
View(km_plot)
View(km_plot)
median(survmodel_s1q9$time)
km_plot <- ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = c(0,0)) + scale_y_continuous(expand = c(0, 0), limits = c(0,
1))
ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = c(0,0)) + scale_y_continuous(expand = c(0, 0), limits = c(0,
1))
median(survmodel_s1q9$time)
plot_dat
survmodel_s1q9
plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
s1q10_kmplot<-ggplot() + geom_step(data = plot_dat, aes(x = Year,
y = Risk), direction = "hv") + scale_x_continuous(expand = c(0,0)) + scale_y_continuous(expand = c(0, 0), limits = c(0,1))
ggsave(here::here("output/question9_plot.png"), plot = s1q10_kmplot, scale=1, width=20, height=5, dpi=70)
knitr::include_graphics(here::here("output/question9_plot.png"))
section1_expl <-section1
#creating tbale 1 of Exposure x Outcome
section1_expl$outcome1 <-
factor(section1$outcome,
levels=c(0,1,2),
labels=c("no outcome", # Reference
"outcome 1",
"outcome 2"))
section1_expl$exposure1 <-
factor(section1$exposure,
levels=c(0,1),
labels=c("no exposure",
"exposure"))
section1_expl$confounder1 <-
factor(section1$confounder,
levels=c(0,1),
labels=c("no confounder",
"confounder"))
table1(~ section1_expl$exposure1 | section1_expl$outcome1*section1_expl$confounder1, data=section1_expl)
library(boot)
library(table1)
library(here)
library(ggplot2)
library(survival)
library(dplyr)
install.packages("cmprsk")
install.packages("cmprsk")
library(cmprsk)
#Loading Data
View(section1)
gray_cif <- cuminc(section1$stop, cohort$outcome, cencode = 0)
str(gray_cif)
s1q13_graycif <- tibble(time = gray_cif$`1 1`$time, risk = gray_cif$`1 1`$est, Outcome = 1)
ggplot() + scale_y_continuous(expand=c(0,0), limits = c(0,1)) +
scale_x_continuous(expand = c(0,0)) +
ylab("Risks") +
xlab("Time on Study") +
geom_step(data = s1q13_graycif, aes(x=time, y=risk)) +
geom_step(data = s1q13_AJ, aes(x=time, y=risk)) +
geom_step(data = q9_plot_dat, aes(x=time, y=risk))
gray_cif <- cuminc(section1$stop, cohort$outcome, cencode = 0)
str(gray_cif)
s1q13_graycif <- tibble(time = gray_cif$`1 1`$time, risk = gray_cif$`1 1`$est, Outcome = 1)
#AJ fit
s1q13_aj_fit <- survfit(Surv(time = stop, event = outcome) ~ 1, data=section1)
s1q13_AJ <- tibble(time = s1q13_aj_fit$time, risk = s1q13_aj_fit$pstate[,
2])
#KM (from question 9)
q9_plot_dat <- tibble(Year = c(0, survmodel_s1q9$time), Risk = c(0,
1 - survmodel_s1q9$surv))
ggplot() + scale_y_continuous(expand=c(0,0), limits = c(0,1)) +
scale_x_continuous(expand = c(0,0)) +
ylab("Risks") +
xlab("Time on Study") +
geom_step(data = s1q13_graycif, aes(x=time, y=risk)) +
geom_step(data = s1q13_AJ, aes(x=time, y=risk)) +
geom_step(data = q9_plot_dat, aes(x=time, y=risk))
